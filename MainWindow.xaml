<Window x:Class="DetectorSismos.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="SASMEX — Centro de Alertas Sísmicas" 
        Height="680" Width="960" MinHeight="520" MinWidth="720"
        WindowStartupLocation="CenterScreen"
        Background="{StaticResource BgAppBrush}">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Cabecera principal -->
        <Border Grid.Row="0" Background="{StaticResource PrimaryDarkBrush}" Padding="24,20">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Border Width="48" Height="48" CornerRadius="8" Background="#33FFFFFF" VerticalAlignment="Center">
                    <TextBlock Text="SAS" FontSize="14" Foreground="White" 
                               HorizontalAlignment="Center" VerticalAlignment="Center" FontWeight="Bold" />
                </Border>
                <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="16,0,0,0">
                    <TextBlock Text="SASMEX · Centro de Alertas Sísmicas" 
                               FontFamily="{StaticResource AppFont}"
                               FontSize="22" FontWeight="SemiBold" Foreground="White"/>
                    <TextBlock Text="Sistema de Alerta Sísmica Mexicano · CIRES · rss.sasmex.net" 
                               FontFamily="{StaticResource AppFont}"
                               FontSize="12" Foreground="#B0BEC5" Margin="0,4,0,0"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Tarjeta de última alerta -->
        <Border Grid.Row="1" Background="{StaticResource BgCardBrush}" BorderBrush="{StaticResource BorderSubtleBrush}" 
                BorderThickness="1" CornerRadius="8" Margin="24,20,24,0" Padding="20">
            <Border.Effect>
                <DropShadowEffect BlurRadius="12" ShadowDepth="2" Opacity="0.06" Color="Black"/>
            </Border.Effect>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                    <Border Width="8" Height="32" CornerRadius="4" Background="{StaticResource WarningBrush}" VerticalAlignment="Center" Margin="0,0,12,0"/>
                    <TextBlock x:Name="txtAlertaTitulo" Text="Sin alerta reciente" 
                               FontFamily="{StaticResource AppFont}" FontSize="16" FontWeight="SemiBold" 
                               Foreground="{StaticResource TextPrimaryBrush}" VerticalAlignment="Center"/>
                </StackPanel>
                <Grid Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Fecha" FontFamily="{StaticResource AppFont}" FontSize="11" 
                                   Foreground="{StaticResource TextMutedBrush}" Margin="0,0,6,0"/>
                        <TextBlock x:Name="txtAlertaFecha" Text="—" FontFamily="{StaticResource AppFontMono}" FontSize="12" 
                                   Foreground="{StaticResource TextSecondaryBrush}"/>
                        <TextBlock Text="  ·  " Foreground="{StaticResource TextMutedBrush}" Margin="8,0"/>
                        <TextBlock Text="Severidad" FontFamily="{StaticResource AppFont}" FontSize="11" 
                                   Foreground="{StaticResource TextMutedBrush}" Margin="0,0,6,0"/>
                        <TextBlock x:Name="txtAlertaSeveridad" Text="—" FontFamily="{StaticResource AppFont}" FontSize="12" 
                                   FontWeight="SemiBold" Foreground="{StaticResource TextSecondaryBrush}"/>
                    </StackPanel>
                    <TextBlock Grid.Column="1" x:Name="txtAlertaDescripcion" Text="" TextWrapping="Wrap" 
                               FontFamily="{StaticResource AppFont}" FontSize="13" Foreground="{StaticResource TextSecondaryBrush}"
                               Margin="24,0,0,0" VerticalAlignment="Center"/>
                </Grid>
            </Grid>
        </Border>

        <!-- Barra de herramientas -->
        <Border Grid.Row="2" Background="{StaticResource BgCardBrush}" BorderBrush="{StaticResource BorderSubtleBrush}" 
                BorderThickness="0,1,0,1" Padding="24,14" Margin="0,16,0,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Text="Fuente oficial: rss.sasmex.net" 
                           VerticalAlignment="Center" FontFamily="{StaticResource AppFont}" FontSize="12" 
                           Foreground="{StaticResource TextMutedBrush}"/>
                <Button Grid.Column="1" x:Name="btnActualizar" Content="Actualizar" 
                        Style="{StaticResource ButtonPrimary}" Width="120" Margin="0,0,12,0"
                        Click="btnActualizar_Click"/>
                <CheckBox Grid.Column="2" x:Name="chkMonitoreo" Content="Monitoreo automático" 
                          VerticalAlignment="Center" FontFamily="{StaticResource AppFont}" FontSize="13"
                          Foreground="{StaticResource TextPrimaryBrush}"
                          Checked="chkMonitoreo_Checked" Unchecked="chkMonitoreo_Unchecked"/>
            </Grid>
        </Border>

        <!-- Lista de alertas -->
        <Border Grid.Row="3" Background="{StaticResource BgCardBrush}" BorderBrush="{StaticResource BorderSubtleBrush}" 
                BorderThickness="1" CornerRadius="8" Margin="24,16,24,16">
            <Border.Effect>
                <DropShadowEffect BlurRadius="12" ShadowDepth="2" Opacity="0.06" Color="Black"/>
            </Border.Effect>
            <Grid Margin="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <TextBlock Grid.Row="0" x:Name="txtContador" Text="Alertas: 0" 
                           FontFamily="{StaticResource AppFont}" FontSize="13" FontWeight="SemiBold" 
                           Foreground="{StaticResource TextSecondaryBrush}" Margin="20,16,20,12"/>

                <DataGrid Grid.Row="1" x:Name="dgAlertas" 
                          Style="{StaticResource DataGridStyle}"
                          AutoGenerateColumns="False" IsReadOnly="True"
                          SelectionMode="Single" CanUserResizeColumns="True" CanUserSortColumns="True"
                          Margin="0,0,0,0" BorderThickness="0">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="FECHA Y HORA" Binding="{Binding FechaHora, StringFormat='{}{0:dd/MM/yyyy HH:mm:ss}'}" 
                                            Width="150" FontFamily="{StaticResource AppFontMono}"/>
                        <DataGridTextColumn Header="EVENTO" Binding="{Binding Evento}" Width="*" MinWidth="240"/>
                        <DataGridTextColumn Header="SEVERIDAD" Binding="{Binding Severidad}" Width="140">
                            <DataGridTextColumn.ElementStyle>
                                <Style TargetType="TextBlock" BasedOn="{StaticResource {x:Type TextBlock}}">
                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                    <Setter Property="HorizontalAlignment" Value="Center"/>
                                    <Setter Property="FontSize" Value="12"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Severidad}" Value="Severidad: Mayor">
                                            <Setter Property="Foreground" Value="{StaticResource DangerBrush}"/>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding Severidad}" Value="Severidad: Menor">
                                            <Setter Property="Foreground" Value="{StaticResource SuccessBrush}"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </DataGridTextColumn.ElementStyle>
                        </DataGridTextColumn>
                        <DataGridTextColumn Header="DESCRIPCIÓN" Binding="{Binding Descripcion}" Width="*" MinWidth="200"/>
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </Border>

        <!-- Barra de estado -->
        <Border Grid.Row="4" Background="{StaticResource PrimaryMidBrush}" Padding="24,10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock x:Name="txtEstado" Text="Listo" Foreground="#E2E8F0" 
                           FontFamily="{StaticResource AppFont}" FontSize="12"/>
                <TextBlock Grid.Column="2" x:Name="txtUltimaActualizacion" Text="Última actualización: —" 
                           Foreground="#94A3B8" FontFamily="{StaticResource AppFontMono}" FontSize="11"/>
            </Grid>
        </Border>
    </Grid>
</Window>
